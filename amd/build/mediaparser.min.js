define ("filter_poodll/mediaparser",["jquery","core/log"],function(a,b){"use strict";b.debug("Media Parser: initialising");return{parse:function parse(c,d){var e={mediaurl:!1,lang:!1,subtitlesurl:!1,sources:!1,imgurl:!1},f=a("#"+c+" "+d).first();if(1===f.length){b.debug("processing player");e.lang=a("#"+c+" "+d+" track[kind=\"captions\"]").first().attr("srclang");e.subtitlesurl=a("#"+c+" "+d+" track[kind=\"captions\"]").first().attr("src");if(f.attr("src")!==void 0){e.mediaurl=f.attr("src")}else{e.mediaurl=a("#"+c+" "+d+" source").first().attr("src")}e.sources=a("#"+c+" "+d+" source");f.addClass("nomediaplugin");f.addClass("nopoodll")}else{var g=a("#"+c+" a").first();e.mediaurl=g.attr("href");e.lang=g.attr("data-lang");e.subtitlesurl=g.attr("data-subtitles");e.imgurl=g.attr("data-img");b.debug("processed link [1]");b.debug(JSON.stringify(e));if(e.subtitlesurl===void 0&&0<e.mediaurl.split("?").length){b.debug("processing link [2]");b.debug("looking at the URL");var h=new URLSearchParams(e.mediaurl.split("?")[1]);b.debug(e.mediaurl.split("?")[1]);b.debug(JSON.stringify(h));e.subtitlesurl=h.get("data-subtitles");e.lang=h.get("data-language");e.mediaurl=e.mediaurl.split("?")[0]}g.addClass("nomediaplugin");g.addClass("nopoodll")}if(!e.imgurl){var i=a("#"+c+" img").first();if(1===i.length){e.imgurl=i.attr("src")}}e.mediaurl=e.mediaurl.split("?")[0];return e}}});
//# sourceMappingURL=mediaparser.min.js.map
