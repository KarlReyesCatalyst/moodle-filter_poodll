define(["jquery","core/log","filter_poodll/poodll_flashrecorder","filter_poodll/poodll_mediarecorder","filter_poodll/poodll_uploadrecorder","filter_poodll/poodll_mobilerecorder"],function(a,b,c,d,e,f){"use strict";return b.debug("PoodLL Recorder: initialising"),{init:function(g){var h="#amdopts_"+g.widgetid,i=a(h).get(0);if(!i)return void b.debug("PoodLL Recorder: No config found on page. Giving up.");this.config=JSON.parse(i.value),a(h).remove(),this.config.wwwroot=M.cfg.wwwroot,this.config.sesskey=M.cfg.sesskey;var j=this.config.selector;if(!j)return void b.debug("unable to fetch element with selector:"+this.config.selector);for(var k=!1,l=0;l<this.config.rec_order.length;l++){switch(this.config.rec_order[l]){case"flash":k=c;break;case"media":k=d;break;case"upload":k=e;break;case"mobile":k=f}if(k.supports_current_browser())return void k.embed(j,this.config)}b.debug("none of available recorders works on this browser")}}});